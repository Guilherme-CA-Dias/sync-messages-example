isCustomized: true
parentId: 68814411f2eacefeb83c3b64
integrationId: 688773c67e68e15f9f5d9f44
key: get-messages
state: READY
errors: []
isDeactivated: false
id: 6896564beee371aad3ccb798
name: Get Messages
type: api-request-to-external-app
inputSchema:
  type: object
  properties:
    cursor:
      type: string
    channelId:
      type: string
config:
  request:
    path: /gmail/v1/users/{userId}/threads/{id}?format=full
    method: get
    pathParameters:
      userId: me
      id:
        $var: $.input.channelId
outputMapping:
  records:
    $iterate:
      source:
        $var: $.output.data.messages
      item:
        id:
          $var: $.item.id
        fields:
          id:
            $var: $.item.id
          ownerId:
            $jsonata: $.item.payload.headers[name="From"].value
          content:
            $firstNotEmpty:
              - $jsonata: >-
                  $base64decode($replace($replace($string($.item.payload.body.data),"-","+"),"_","/"))
              - $var: $.item.snippet
integrationKey: gmail
